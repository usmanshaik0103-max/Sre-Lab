{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/usman/OneDrive/Desktop/sre-incident-simulator-platform/orchids-sre-incident-simulator-platform-main/src/visual-edits/VisualEditsMessenger.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use client\";\n\nimport { useEffect, useState, useRef } from \"react\";\n\nexport const CHANNEL = \"ORCHIDS_HOVER_v1\" as const;\nconst VISUAL_EDIT_MODE_KEY = \"orchids_visual_edit_mode\" as const;\nconst FOCUSED_ELEMENT_KEY = \"orchids_focused_element\" as const;\n\n// Deduplicate helper for high-frequency traffic (HIT / FOCUS_MOVED / SCROLL)\n// -----------------------------------------------------------------------------\nlet _orchidsLastMsg = \"\";\nconst postMessageDedup = (data: any) => {\n  try {\n    const key = JSON.stringify(data);\n    if (key === _orchidsLastMsg) return; // identical – drop\n    _orchidsLastMsg = key;\n  } catch {\n    // if stringify fails, fall through\n  }\n  window.parent.postMessage(data, \"*\");\n};\n\nexport type ParentToChild =\n  | { type: typeof CHANNEL; msg: \"POINTER\"; x: number; y: number }\n  | { type: typeof CHANNEL; msg: \"VISUAL_EDIT_MODE\"; active: boolean }\n  | { type: typeof CHANNEL; msg: \"SCROLL\"; dx: number; dy: number }\n  | { type: typeof CHANNEL; msg: \"CLEAR_INLINE_STYLES\"; elementId: string }\n  | {\n      type: typeof CHANNEL;\n      msg: \"PREVIEW_FONT\";\n      elementId: string;\n      fontFamily: string;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"RESIZE_ELEMENT\";\n      elementId: string;\n      width: number;\n      height: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"SHOW_ELEMENT_HOVER\";\n      elementId: string | null;\n    };\n\nexport type ChildToParent =\n  | {\n      type: typeof CHANNEL;\n      msg: \"HIT\";\n      id: string | null;\n      tag: string | null;\n      rect: { top: number; left: number; width: number; height: number } | null;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"ELEMENT_CLICKED\";\n      id: string | null;\n      tag: string | null;\n      rect: { top: number; left: number; width: number; height: number };\n      clickPosition: { x: number; y: number };\n      isEditable?: boolean;\n      currentStyles?: {\n        fontSize?: string;\n        color?: string;\n        fontWeight?: string;\n        fontStyle?: string;\n        textDecoration?: string;\n        textAlign?: string;\n        lineHeight?: string;\n        letterSpacing?: string;\n        paddingLeft?: string;\n        paddingRight?: string;\n        paddingTop?: string;\n        paddingBottom?: string;\n        marginLeft?: string;\n        marginRight?: string;\n        marginTop?: string;\n        marginBottom?: string;\n        backgroundColor?: string;\n        backgroundImage?: string;\n        borderRadius?: string;\n        fontFamily?: string;\n        opacity?: string;\n        display?: string;\n        flexDirection?: string;\n        alignItems?: string;\n        justifyContent?: string;\n        gap?: string;\n      };\n      className?: string;\n      src?: string;\n    }\n  | { type: typeof CHANNEL; msg: \"SCROLL_STARTED\" }\n  | { type: typeof CHANNEL; msg: \"SCROLL_STOPPED\" }\n  | {\n      type: typeof CHANNEL;\n      msg: \"TEXT_CHANGED\";\n      id: string;\n      oldText: string;\n      newText: string;\n      filePath: string;\n      line: number;\n      column: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"STYLE_CHANGED\";\n      id: string;\n      styles: Record<string, string>;\n      filePath: string;\n      line: number;\n      column: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"STYLE_BLUR\";\n      id: string;\n      styles: Record<string, string>;\n      filePath: string;\n      line: number;\n      column: number;\n      className: string;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"IMAGE_BLUR\";\n      id: string;\n      oldSrc: string;\n      newSrc: string;\n      filePath: string;\n      line: number;\n      column: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"FOCUS_MOVED\";\n      id: string;\n      rect: { top: number; left: number; width: number; height: number };\n    }\n  | { type: typeof CHANNEL; msg: \"VISUAL_EDIT_MODE_ACK\"; active: boolean }\n  | { type: typeof CHANNEL; msg: \"VISUAL_EDIT_MODE_RESTORED\"; active: boolean };\n\ntype Box = null | { top: number; left: number; width: number; height: number };\n\nconst BOX_PADDING = 4; // Pixels to expand the box on each side\n\n// Helper to check if element can be made contentEditable\nconst isTextEditable = (element: HTMLElement): boolean => {\n  const tagName = element.tagName.toLowerCase();\n  // Elements that typically contain text and can be made contentEditable\n  const editableTags = [\n    \"p\",\n    \"h1\",\n    \"h2\",\n    \"h3\",\n    \"h4\",\n    \"h5\",\n    \"h6\",\n    \"span\",\n    \"div\",\n    \"li\",\n    \"td\",\n    \"th\",\n    \"label\",\n    \"a\",\n    \"button\",\n  ];\n\n  // Check if it's already contentEditable or an input/textarea\n  if (\n    element.contentEditable === \"true\" ||\n    tagName === \"input\" ||\n    tagName === \"textarea\"\n  ) {\n    return true;\n  }\n\n  // Allow editing if element contains text and is an editable tag\n  // Only allow editing if element has at most 1 child OR has direct text content\n  if (editableTags.includes(tagName) && element.textContent?.trim()) {\n    // Check if element has direct text nodes (not just text from children)\n    const hasDirectText = Array.from(element.childNodes).some(\n      (node) => node.nodeType === Node.TEXT_NODE && node.textContent?.trim()\n    );\n\n    // Allow editing if:\n    // 1. Element has no children (pure text element)\n    // 2. Element has 1 or fewer children AND has direct text content\n    if (\n      element.childElementCount === 0 ||\n      (element.childElementCount <= 1 && hasDirectText)\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n// Helper to extract only text nodes from an element (excluding child element text)\nconst extractDirectTextContent = (element: HTMLElement): string => {\n  let text = \"\";\n  for (const node of element.childNodes) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      text += node.textContent || \"\";\n    }\n  }\n  return text;\n};\n\n// Helper to parse data-orchids-id to extract file path, line, and column\nconst parseOrchidsId = (\n  orchidsId: string\n): { filePath: string; line: number; column: number } | null => {\n  // Format: \"filepath:line:column\"\n  const parts = orchidsId.split(\":\");\n  if (parts.length < 3) return null;\n\n  // The file path might contain colons, so we need to handle that\n  const column = parseInt(parts.pop() || \"0\");\n  const line = parseInt(parts.pop() || \"0\");\n  const filePath = parts.join(\":\"); // Rejoin the remaining parts as the file path\n\n  if (isNaN(line) || isNaN(column)) return null;\n\n  return { filePath, line, column };\n};\n\n// Helper to get current styles of an element (including inline styles)\nconst getCurrentStyles = (\n  element: HTMLElement\n): {\n  fontSize?: string;\n  color?: string;\n  fontWeight?: string;\n  fontStyle?: string;\n  textDecoration?: string;\n  textAlign?: string;\n  lineHeight?: string;\n  letterSpacing?: string;\n  paddingLeft?: string;\n  paddingRight?: string;\n  paddingTop?: string;\n  paddingBottom?: string;\n  marginLeft?: string;\n  marginRight?: string;\n  marginTop?: string;\n  marginBottom?: string;\n  backgroundColor?: string;\n  backgroundImage?: string;\n  borderRadius?: string;\n  fontFamily?: string;\n  opacity?: string;\n  display?: string;\n  flexDirection?: string;\n  alignItems?: string;\n  justifyContent?: string;\n  gap?: string;\n} => {\n  const computed = window.getComputedStyle(element);\n\n  // Helper to normalize values and provide defaults\n  const normalizeValue = (value: string, property: string): string => {\n    // Handle background color - if it's transparent or rgba(0,0,0,0), return \"transparent\"\n    if (property === \"backgroundColor\") {\n      if (\n        value === \"rgba(0, 0, 0, 0)\" ||\n        value === \"rgb(0, 0, 0, 0)\" ||\n        value === \"transparent\" ||\n        value === \"\"\n      ) {\n        return \"transparent\";\n      }\n    }\n\n    // Handle background image - if none, return \"none\"\n    if (property === \"backgroundImage\" && (value === \"none\" || value === \"\")) {\n      return \"none\";\n    }\n\n    // Handle text decoration - if none, return \"none\"\n    if (property === \"textDecoration\") {\n      // Some browsers return complex values like \"none solid rgb(0, 0, 0)\"\n      if (value.includes(\"none\") || value === \"\") {\n        return \"none\";\n      }\n    }\n\n    // Handle font style - if normal, return \"normal\"\n    if (property === \"fontStyle\" && (value === \"normal\" || value === \"\")) {\n      return \"normal\";\n    }\n\n    // Handle font weight - normalize to standard values\n    if (property === \"fontWeight\") {\n      const weight = parseInt(value);\n      if (!isNaN(weight)) {\n        return String(weight);\n      }\n      return value || \"400\";\n    }\n\n    // Handle opacity - if 1, return \"1\"\n    if (property === \"opacity\" && (value === \"1\" || value === \"\")) {\n      return \"1\";\n    }\n\n    // Handle spacing values (padding/margin) - if 0px, return \"0\"\n    if (\n      (property.includes(\"padding\") || property.includes(\"margin\")) &&\n      (value === \"0px\" || value === \"0\")\n    ) {\n      return \"0\";\n    }\n\n    // Handle border radius - if 0px, return \"0\"\n    if (property === \"borderRadius\" && (value === \"0px\" || value === \"0\")) {\n      return \"0\";\n    }\n\n    // Handle letter spacing - if normal, return \"normal\"\n    if (\n      property === \"letterSpacing\" &&\n      (value === \"normal\" || value === \"0px\")\n    ) {\n      return \"normal\";\n    }\n\n    // Handle gap - if normal, return \"normal\"\n    if (property === \"gap\" && (value === \"normal\" || value === \"0px\")) {\n      return \"normal\";\n    }\n\n    return value;\n  };\n\n  return {\n    fontSize: normalizeValue(computed.fontSize, \"fontSize\"),\n    color: normalizeValue(computed.color, \"color\"),\n    fontWeight: normalizeValue(computed.fontWeight, \"fontWeight\"),\n    fontStyle: normalizeValue(computed.fontStyle, \"fontStyle\"),\n    textDecoration: normalizeValue(computed.textDecoration, \"textDecoration\"),\n    textAlign: normalizeValue(computed.textAlign, \"textAlign\"),\n    lineHeight: normalizeValue(computed.lineHeight, \"lineHeight\"),\n    letterSpacing: normalizeValue(computed.letterSpacing, \"letterSpacing\"),\n    paddingLeft: normalizeValue(computed.paddingLeft, \"paddingLeft\"),\n    paddingRight: normalizeValue(computed.paddingRight, \"paddingRight\"),\n    paddingTop: normalizeValue(computed.paddingTop, \"paddingTop\"),\n    paddingBottom: normalizeValue(computed.paddingBottom, \"paddingBottom\"),\n    marginLeft: normalizeValue(computed.marginLeft, \"marginLeft\"),\n    marginRight: normalizeValue(computed.marginRight, \"marginRight\"),\n    marginTop: normalizeValue(computed.marginTop, \"marginTop\"),\n    marginBottom: normalizeValue(computed.marginBottom, \"marginBottom\"),\n    backgroundColor: normalizeValue(\n      computed.backgroundColor,\n      \"backgroundColor\"\n    ),\n    backgroundImage: normalizeValue(\n      computed.backgroundImage,\n      \"backgroundImage\"\n    ),\n    borderRadius: normalizeValue(computed.borderRadius, \"borderRadius\"),\n    fontFamily: normalizeValue(computed.fontFamily, \"fontFamily\"),\n    opacity: normalizeValue(computed.opacity, \"opacity\"),\n    display: normalizeValue(computed.display, \"display\"),\n    flexDirection: normalizeValue(computed.flexDirection, \"flexDirection\"),\n    alignItems: normalizeValue(computed.alignItems, \"alignItems\"),\n    justifyContent: normalizeValue(computed.justifyContent, \"justifyContent\"),\n    gap: normalizeValue(computed.gap, \"gap\"),\n  };\n};\n\n// Normalize image src for comparison (handles Next.js optimization wrappers)\nconst normalizeImageSrc = (input: string): string => {\n  if (!input) return \"\";\n  try {\n    const url = new URL(input, window.location.origin);\n    // Handle Next.js <Image> optimization wrapper\n    if (url.pathname === \"/_next/image\") {\n      const real = url.searchParams.get(\"url\");\n      if (real) return decodeURIComponent(real);\n    }\n    return url.href; // absolute form\n  } catch {\n    return input;\n  }\n};\n\n// Helper to wrap multiline text only when it contains line breaks\nconst wrapMultiline = (text: string): string => {\n  if (text.includes(\"\\n\")) {\n    const escaped = text.replace(/\\n/g, \"\\\\n\");\n    // Wrap in {` ... `} so JSX will interpret it as a template literal\n    return `{\\`${escaped}\\`}`;\n  }\n  return text;\n};\n\nexport default function HoverReceiver() {\n  const [hoverBox, setHoverBox] = useState<Box>(null);\n  const [hoverBoxes, setHoverBoxes] = useState<Box[]>([]);\n  const [focusBox, setFocusBox] = useState<Box>(null);\n  const [focusedElementId, setFocusedElementId] = useState<string | null>(null);\n  const [isVisualEditMode, setIsVisualEditMode] = useState(() => {\n    // Initialize from localStorage if available\n    if (typeof window !== \"undefined\") {\n      const stored = localStorage.getItem(VISUAL_EDIT_MODE_KEY);\n      return stored === \"true\";\n    }\n    return false;\n  });\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizeHandle, setResizeHandle] = useState<string | null>(null);\n  const [resizeStart, setResizeStart] = useState<{\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  } | null>(null);\n  const [isScrolling, setIsScrolling] = useState(false);\n\n  // Tag labels for hover and focus overlays\n  const [hoverTag, setHoverTag] = useState<string | null>(null);\n  const [focusTag, setFocusTag] = useState<string | null>(null);\n  const isResizingRef = useRef(false);\n  const lastHitElementRef = useRef<HTMLElement | null>(null);\n  const lastHitIdRef = useRef<string | null>(null);\n  const focusedElementRef = useRef<HTMLElement | null>(null);\n  const isVisualEditModeRef = useRef(false);\n  const scrollTimeoutRef = useRef<number | null>(null);\n  const originalContentRef = useRef<string>(\"\");\n  const originalSrcRef = useRef<string>(\"\"); // track original img src\n  const focusedImageElementRef = useRef<HTMLImageElement | null>(null); // track the actual img element\n  const editingElementRef = useRef<HTMLElement | null>(null);\n  const wasEditableRef = useRef<boolean>(false);\n  const styleElementRef = useRef<HTMLStyleElement | null>(null);\n  const originalStylesRef = useRef<Record<string, string>>({});\n  const appliedStylesRef = useRef<Map<string, Record<string, string>>>(\n    new Map()\n  );\n  const hasStyleChangesRef = useRef<boolean>(false);\n  const lastClickTimeRef = useRef<number>(0);\n  const pendingCleanupRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Cache of loaded fonts\n  const loadedFontFamilies = useRef<Set<string>>(new Set());\n  // Map of elementId that already has a persistent font set\n  const persistentFontMap = useRef<Map<string, string>>(new Map());\n  // Timeout refs for clearing persistent font map\n  const persistentFontTimeouts = useRef<Map<string, number>>(new Map());\n\n  // Keep ref in sync with state and persist to localStorage\n  useEffect(() => {\n    isVisualEditModeRef.current = isVisualEditMode;\n    // Persist to localStorage\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(VISUAL_EDIT_MODE_KEY, String(isVisualEditMode));\n    }\n  }, [isVisualEditMode]);\n\n  // On mount, notify parent if visual edit mode was restored from localStorage\n  useEffect(() => {\n    if (isVisualEditMode) {\n      // Send acknowledgement to parent that visual edit mode is active\n      // This will sync the parent's state with our restored state\n      window.parent.postMessage(\n        { type: CHANNEL, msg: \"VISUAL_EDIT_MODE_ACK\", active: true },\n        \"*\"\n      );\n\n      // Also send a special message to indicate this was restored from localStorage\n      window.parent.postMessage(\n        { type: CHANNEL, msg: \"VISUAL_EDIT_MODE_RESTORED\", active: true },\n        \"*\"\n      );\n\n      // Restore focused element after a short delay to ensure DOM is ready\n      setTimeout(() => {\n        if (typeof window !== \"undefined\") {\n          // Restore focused element\n          const focusedData = localStorage.getItem(FOCUSED_ELEMENT_KEY);\n          if (focusedData) {\n            try {\n              const { id } = JSON.parse(focusedData);\n              const element = document.querySelector(\n                `[data-orchids-id=\"${id}\"]`\n              ) as HTMLElement;\n\n              if (element) {\n                // Simulate a click on the element to restore focus\n                const rect = element.getBoundingClientRect();\n                const clickEvent = new MouseEvent(\"click\", {\n                  clientX: rect.left + rect.width / 2,\n                  clientY: rect.top + rect.height / 2,\n                  bubbles: true,\n                  cancelable: true,\n                });\n                element.dispatchEvent(clickEvent);\n              }\n            } catch {\n              // Ignore parsing errors\n            }\n          }\n        }\n      }, 500); // Wait 500ms for DOM to be fully ready\n    }\n  }, []); // Run only on mount\n\n  // Helper function to expand box dimensions\n  const expandBox = (rect: DOMRect): Box => ({\n    top: rect.top - BOX_PADDING,\n    left: rect.left - BOX_PADDING,\n    width: rect.width + BOX_PADDING * 2,\n    height: rect.height + BOX_PADDING * 2,\n  });\n\n  // Helper to update focus box position\n  const updateFocusBox = () => {\n    if (focusedElementRef.current) {\n      const r = focusedElementRef.current.getBoundingClientRect();\n      setFocusBox(expandBox(r));\n    }\n  };\n\n  // Add global styles for contentEditable elements\n  useEffect(() => {\n    if (isVisualEditMode && !styleElementRef.current) {\n      const style = document.createElement(\"style\");\n      style.textContent = `\n        [contenteditable=\"true\"]:focus {\n          outline: none !important;\n          box-shadow: none !important;\n          border-color: inherit !important;\n        }\n        [contenteditable=\"true\"] {\n          cursor: text !important;\n        }\n        /* Prevent the default blue highlight on contenteditable */\n        [contenteditable=\"true\"]::selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        [contenteditable=\"true\"]::-moz-selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        /* Prevent child elements from being editable */\n        [contenteditable=\"true\"] [contenteditable=\"false\"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n          opacity: 0.7 !important;\n          cursor: default !important;\n        }\n        /* Ensure protected elements can't be selected */\n        [data-orchids-protected=\"true\"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n        }\n      `;\n      document.head.appendChild(style);\n      styleElementRef.current = style;\n    } else if (!isVisualEditMode && styleElementRef.current) {\n      styleElementRef.current.remove();\n      styleElementRef.current = null;\n    }\n\n    return () => {\n      if (styleElementRef.current) {\n        styleElementRef.current.remove();\n        styleElementRef.current = null;\n      }\n    };\n  }, [isVisualEditMode]);\n\n  // Helper to make only text nodes editable and protect child elements\n  const protectChildElements = (element: HTMLElement) => {\n    // Make all child elements non-editable\n    const childElements = element.querySelectorAll(\"*\");\n    childElements.forEach((child) => {\n      const childEl = child as HTMLElement;\n      childEl.contentEditable = \"false\";\n      // Add a data attribute to mark protected elements\n      childEl.setAttribute(\"data-orchids-protected\", \"true\");\n      // Only prevent text selection within the child elements when parent is being edited\n      // But still allow pointer events for hovering and clicking\n      childEl.style.userSelect = \"none\";\n      childEl.style.webkitUserSelect = \"none\";\n      // Don't set pointerEvents to none - we want to allow hover and click\n    });\n  };\n\n  // Helper to restore child elements after editing\n  const restoreChildElements = (element: HTMLElement) => {\n    const protectedElements = element.querySelectorAll(\n      '[data-orchids-protected=\"true\"]'\n    );\n    protectedElements.forEach((child) => {\n      const childEl = child as HTMLElement;\n      childEl.removeAttribute(\"contenteditable\");\n      childEl.removeAttribute(\"data-orchids-protected\");\n      // Restore original styles\n      childEl.style.userSelect = \"\";\n      childEl.style.webkitUserSelect = \"\";\n    });\n  };\n\n  // Handle text changes and send to parent\n  const handleTextChange = (element: HTMLElement) => {\n    // Double-check this is still the editing element to avoid stale closures\n    if (element !== editingElementRef.current) {\n      console.warn(\"Attempting to handle text change for non-editing element\");\n      return;\n    }\n\n    // Get the orchids ID from the element to ensure we're working with the right one\n    const orchidsId = element.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    // For elements with children, only extract direct text content\n    let newText: string;\n    let oldText: string;\n\n    if (element.childElementCount > 0) {\n      // Element has children - only track direct text nodes\n      newText = extractDirectTextContent(element);\n      // We need to compare against the original direct text content\n      // Since originalContentRef stores the full text, we need to handle this differently\n      oldText = originalContentRef.current;\n    } else {\n      // No children - use innerText to preserve line breaks\n      newText = element.innerText || element.textContent || \"\";\n      oldText = originalContentRef.current;\n    }\n\n    if (newText !== oldText) {\n      const parsed = parseOrchidsId(orchidsId);\n      if (!parsed) return;\n\n      // Send text change message to parent\n      const msg: ChildToParent = {\n        type: CHANNEL,\n        msg: \"TEXT_CHANGED\",\n        id: orchidsId,\n        oldText: wrapMultiline(oldText),\n        newText: wrapMultiline(newText),\n        filePath: parsed.filePath,\n        line: parsed.line,\n        column: parsed.column,\n      };\n\n      postMessageDedup(msg);\n\n      // Update the original content reference\n      originalContentRef.current = newText;\n    }\n  };\n\n  // Handle style changes and send to parent\n  const handleStyleChange = (\n    element: HTMLElement,\n    styles: Record<string, string>\n  ) => {\n    const orchidsId = element.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    const parsed = parseOrchidsId(orchidsId);\n    if (!parsed) return;\n\n    // Find ALL elements with the same orchids ID\n    const allMatchingElements = document.querySelectorAll(\n      `[data-orchids-id=\"${orchidsId}\"]`\n    ) as NodeListOf<HTMLElement>;\n\n    // Apply styles to ALL matching elements for visual feedback\n    allMatchingElements.forEach((el) => {\n      Object.entries(styles).forEach(([property, value]) => {\n        // Convert camelCase to kebab-case for CSS property names\n        const cssProp = property.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n\n        // Handle special cases for default values\n        let finalValue = value;\n\n        // If backgroundColor is being set to transparent, use transparent keyword\n        if (\n          property === \"backgroundColor\" &&\n          (value === \"transparent\" ||\n            value === \"rgba(0, 0, 0, 0)\" ||\n            value === \"rgb(0, 0, 0, 0)\")\n        ) {\n          finalValue = \"transparent\";\n        }\n\n        // If removing styles (setting to default), remove the property\n        if (\n          (property === \"backgroundColor\" && finalValue === \"transparent\") ||\n          (property === \"backgroundImage\" && value === \"none\") ||\n          (property === \"textDecoration\" && value === \"none\") ||\n          (property === \"fontStyle\" && value === \"normal\") ||\n          (property === \"opacity\" && value === \"1\") ||\n          ((property.includes(\"padding\") || property.includes(\"margin\")) &&\n            value === \"0\") ||\n          (property === \"borderRadius\" && value === \"0\") ||\n          (property === \"letterSpacing\" && value === \"normal\") ||\n          (property === \"gap\" && value === \"normal\")\n        ) {\n          // Remove the property to let the stylesheet value show through\n          el.style.removeProperty(cssProp);\n        } else {\n          // Apply with !important so it overrides existing rules\n          el.style.setProperty(cssProp, finalValue, \"important\");\n        }\n      });\n    });\n\n    // Store the applied styles\n    const existingStyles = appliedStylesRef.current.get(orchidsId) || {};\n    appliedStylesRef.current.set(orchidsId, { ...existingStyles, ...styles });\n    hasStyleChangesRef.current = true;\n\n    // Update the focus box after style change\n    requestAnimationFrame(() => {\n      updateFocusBox();\n    });\n\n    // Don't send to parent yet - wait for blur\n  };\n\n  // Send style changes on blur\n  const handleStyleBlur = (element: HTMLElement) => {\n    if (!hasStyleChangesRef.current) return;\n\n    const orchidsId = element.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    const parsed = parseOrchidsId(orchidsId);\n    if (!parsed) return;\n\n    const appliedStyles = appliedStylesRef.current.get(orchidsId);\n    if (!appliedStyles || Object.keys(appliedStyles).length === 0) return;\n\n    // Get className for breakpoint detection\n    const className = element.getAttribute(\"class\") || \"\";\n\n    // Send style blur message to parent for Tailwind conversion\n    const msg: ChildToParent = {\n      type: CHANNEL,\n      msg: \"STYLE_BLUR\",\n      id: orchidsId,\n      styles: appliedStyles,\n      className,\n      filePath: parsed.filePath,\n      line: parsed.line,\n      column: parsed.column,\n    };\n\n    postMessageDedup(msg);\n\n    // Reset style changes flag\n    hasStyleChangesRef.current = false;\n  };\n\n  // Flush image src updates on blur/focus change\n  const flushImageSrcChange = () => {\n    // Use the stored image element reference if available\n    const imgElement = focusedImageElementRef.current;\n    if (!imgElement) return;\n\n    const orchidsId = imgElement.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    const parsed = parseOrchidsId(orchidsId);\n    if (!parsed) return;\n\n    const newSrc = normalizeImageSrc(imgElement.src);\n    const oldSrc = normalizeImageSrc(originalSrcRef.current);\n\n    if (!newSrc || newSrc === oldSrc) return; // nothing changed\n\n    const msg: ChildToParent = {\n      type: CHANNEL,\n      msg: \"IMAGE_BLUR\",\n      id: orchidsId,\n      oldSrc,\n      newSrc,\n      filePath: parsed.filePath,\n      line: parsed.line,\n      column: parsed.column,\n    };\n\n    postMessageDedup(msg);\n\n    originalSrcRef.current = newSrc; // reset baseline\n    focusedImageElementRef.current = null; // clear reference\n  };\n\n  // Listen for style and image updates from parent\n  useEffect(() => {\n    function handleMessage(e: MessageEvent) {\n      if (e.data?.type === \"ORCHIDS_STYLE_UPDATE\") {\n        const { elementId, styles } = e.data;\n\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        if (allMatchingElements.length > 0) {\n          // If fontFamily is present ensure stylesheet loaded first\n          const fam = styles.fontFamily || styles[\"fontFamily\"];\n          if (fam) {\n            const familyKey = fam.replace(/['\\s]+/g, \"+\");\n            if (!loadedFontFamilies.current.has(familyKey)) {\n              const link = document.createElement(\"link\");\n              link.rel = \"stylesheet\";\n              link.href = `https://fonts.googleapis.com/css2?family=${familyKey}:wght@400&display=swap`;\n              document.head.appendChild(link);\n              loadedFontFamilies.current.add(familyKey);\n            }\n          }\n\n          // If fontFamily made persistent via style update, remember so previews don't override\n          if (fam) {\n            persistentFontMap.current.set(elementId, fam);\n\n            // Clear any existing timeout\n            const existingTimeout =\n              persistentFontTimeouts.current.get(elementId);\n            if (existingTimeout) {\n              clearTimeout(existingTimeout);\n            }\n\n            // Set timeout to clear persistent font after 2 seconds, allowing previews again\n            const timeoutId = window.setTimeout(() => {\n              persistentFontMap.current.delete(elementId);\n              persistentFontTimeouts.current.delete(elementId);\n            }, 2000);\n\n            persistentFontTimeouts.current.set(elementId, timeoutId);\n          }\n\n          // Apply styles to ALL matching elements\n          allMatchingElements.forEach((element) => {\n            // Only update handleStyleChange for the focused element to track changes\n            if (focusedElementRef.current === element) {\n              handleStyleChange(element, styles);\n            } else {\n              // For other elements, apply styles directly\n              Object.entries(styles).forEach(([property, value]) => {\n                const cssProp = property\n                  .replace(/([A-Z])/g, \"-$1\")\n                  .toLowerCase();\n\n                // Handle special cases for default values\n                let finalValue = String(value);\n\n                // If backgroundColor is being set to transparent, use transparent keyword\n                if (\n                  property === \"backgroundColor\" &&\n                  (value === \"transparent\" ||\n                    value === \"rgba(0, 0, 0, 0)\" ||\n                    value === \"rgb(0, 0, 0, 0)\")\n                ) {\n                  finalValue = \"transparent\";\n                }\n\n                // If removing styles (setting to default), remove the property\n                if (\n                  (property === \"backgroundColor\" &&\n                    finalValue === \"transparent\") ||\n                  (property === \"backgroundImage\" && value === \"none\") ||\n                  (property === \"textDecoration\" && value === \"none\") ||\n                  (property === \"fontStyle\" && value === \"normal\") ||\n                  (property === \"opacity\" && value === \"1\") ||\n                  ((property.includes(\"padding\") ||\n                    property.includes(\"margin\")) &&\n                    value === \"0\") ||\n                  (property === \"borderRadius\" && value === \"0\") ||\n                  (property === \"letterSpacing\" && value === \"normal\") ||\n                  (property === \"gap\" && value === \"normal\")\n                ) {\n                  // Remove the property to let the stylesheet value show through\n                  element.style.removeProperty(cssProp);\n                } else {\n                  element.style.setProperty(cssProp, finalValue, \"important\");\n                }\n              });\n            }\n          });\n        }\n      } else if (e.data?.type === \"ORCHIDS_IMAGE_UPDATE\") {\n        const { elementId, src, oldSrc } = e.data;\n        let element: HTMLImageElement | null = null;\n        const candidates = document.querySelectorAll(\n          `[data-orchids-id=\"${elementId}\"]`\n        );\n        candidates.forEach((el) => {\n          if (el.tagName.toLowerCase() === \"img\") {\n            const img = el as HTMLImageElement;\n            const norm = normalizeImageSrc(img.src);\n            if (!element) element = img; // first fallback\n            if (oldSrc && normalizeImageSrc(oldSrc) === norm) {\n              element = img;\n            }\n          }\n        });\n\n        if (!element) return;\n\n        if ((element as HTMLElement).tagName.toLowerCase() === \"img\") {\n          const imgEl = element as HTMLImageElement;\n\n          {\n            /*\n             * Clear any existing responsive sources so the newly uploaded image\n             * always displays.  Some frameworks (e.g. Next.js) add a `srcset`\n             * attribute which can override `src` in certain viewport/device\n             * scenarios, so we strip it out before setting the new source.\n             */\n            imgEl.removeAttribute(\"srcset\");\n            imgEl.srcset = \"\";\n\n            imgEl.src = src;\n\n            // Update baseline src so flush doesn't treat this as pending change\n            originalSrcRef.current = normalizeImageSrc(src);\n            focusedImageElementRef.current = imgEl;\n\n            imgEl.onload = () => updateFocusBox();\n          }\n        }\n      } else if (e.data?.type === \"RESIZE_ELEMENT\") {\n        const { elementId, width, height } = e.data;\n        const element = document.querySelector(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as HTMLElement;\n\n        if (element && focusedElementRef.current === element) {\n          // Apply temporary resize styles\n          element.style.setProperty(\"width\", `${width}px`, \"important\");\n          element.style.setProperty(\"height\", `${height}px`, \"important\");\n\n          // Update focus box\n          updateFocusBox();\n        }\n      }\n    }\n\n    window.addEventListener(\"message\", handleMessage);\n    return () => window.removeEventListener(\"message\", handleMessage);\n  }, []);\n\n  // Handle resize\n  const handleResizeStart = (e: React.MouseEvent, handle: string) => {\n    if (!focusedElementRef.current) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const rect = focusedElementRef.current.getBoundingClientRect();\n\n    // Clear any hover overlay when starting resize\n    setHoverBox(null);\n    lastHitElementRef.current = null;\n\n    // Disable pointer events on body to prevent hover detection\n    document.body.style.pointerEvents = \"none\";\n    // Keep resize handles interactive\n    const resizeHandles = document.querySelectorAll(\".resize-handle\");\n    resizeHandles.forEach((handle) => {\n      (handle as HTMLElement).style.pointerEvents = \"auto\";\n    });\n\n    setIsResizing(true);\n    isResizingRef.current = true;\n    setResizeHandle(handle);\n    setResizeStart({\n      x: e.clientX,\n      y: e.clientY,\n      width: rect.width,\n      height: rect.height,\n    });\n  };\n\n  // Handle resize move\n  useEffect(() => {\n    if (\n      !isResizing ||\n      !resizeStart ||\n      !resizeHandle ||\n      !focusedElementRef.current\n    )\n      return;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const dx = e.clientX - resizeStart.x;\n      const dy = e.clientY - resizeStart.y;\n\n      let newWidth = resizeStart.width;\n      let newHeight = resizeStart.height;\n\n      // Calculate new dimensions based on handle\n      if (resizeHandle.includes(\"e\")) newWidth = resizeStart.width + dx;\n      if (resizeHandle.includes(\"w\")) newWidth = resizeStart.width - dx;\n      if (resizeHandle.includes(\"s\")) newHeight = resizeStart.height + dy;\n      if (resizeHandle.includes(\"n\")) newHeight = resizeStart.height - dy;\n\n      // Get parent container for constraints\n      const parent = focusedElementRef.current?.parentElement;\n      if (parent) {\n        const parentRect = parent.getBoundingClientRect();\n        const parentStyles = window.getComputedStyle(parent);\n        const parentPaddingLeft = parseFloat(parentStyles.paddingLeft) || 0;\n        const parentPaddingRight = parseFloat(parentStyles.paddingRight) || 0;\n        const parentPaddingTop = parseFloat(parentStyles.paddingTop) || 0;\n        const parentPaddingBottom = parseFloat(parentStyles.paddingBottom) || 0;\n\n        const maxWidth =\n          parentRect.width - parentPaddingLeft - parentPaddingRight;\n        const maxHeight =\n          parentRect.height - parentPaddingTop - parentPaddingBottom;\n\n        /*\n         * Soft-clamp strategy: we respect the parent’s max size until the\n         * user’s cursor actually travels beyond that limit.  As soon as the\n         * drag distance would produce a dimension larger than the container\n         * can accommodate we stop clamping and let the element follow the\n         * cursor, effectively allowing it to “spill” out of its parent.\n         */\n        const exceedsWidth = newWidth > maxWidth;\n        const exceedsHeight = newHeight > maxHeight;\n\n        newWidth = Math.max(\n          20,\n          exceedsWidth ? newWidth : Math.min(newWidth, maxWidth)\n        );\n\n        newHeight = Math.max(\n          20,\n          exceedsHeight ? newHeight : Math.min(newHeight, maxHeight)\n        );\n      } else {\n        // Fallback to minimum dimensions if no parent\n        newWidth = Math.max(20, newWidth);\n        newHeight = Math.max(20, newHeight);\n      }\n\n      // Ensure hover box stays hidden during resize\n      if (hoverBox) {\n        setHoverBox(null);\n      }\n\n      // Send resize message to parent\n      if (focusedElementId) {\n        window.parent.postMessage(\n          {\n            type: CHANNEL,\n            msg: \"RESIZE_ELEMENT\",\n            elementId: focusedElementId,\n            width: Math.round(newWidth),\n            height: Math.round(newHeight),\n          },\n          \"*\"\n        );\n      }\n    };\n\n    const handleMouseUp = () => {\n      if (focusedElementRef.current && focusedElementId) {\n        const element = focusedElementRef.current;\n        const computedStyle = window.getComputedStyle(element);\n        const width = parseFloat(computedStyle.width) || element.offsetWidth;\n        const height = parseFloat(computedStyle.height) || element.offsetHeight;\n\n        // Check if element has max-width/max-height constraints\n        const maxWidth = computedStyle.maxWidth;\n        const maxHeight = computedStyle.maxHeight;\n        const hasMaxWidth =\n          maxWidth && maxWidth !== \"none\" && maxWidth !== \"initial\";\n        const hasMaxHeight =\n          maxHeight && maxHeight !== \"none\" && maxHeight !== \"initial\";\n\n        // Try to use relative units when possible\n        const parent = element.parentElement;\n        let widthValue = `${Math.round(width)}px`;\n        let heightValue = `${Math.round(height)}px`;\n\n        if (parent) {\n          const parentRect = parent.getBoundingClientRect();\n          const parentStyles = window.getComputedStyle(parent);\n          const parentPaddingLeft = parseFloat(parentStyles.paddingLeft) || 0;\n          const parentPaddingRight = parseFloat(parentStyles.paddingRight) || 0;\n          const parentPaddingTop = parseFloat(parentStyles.paddingTop) || 0;\n          const parentPaddingBottom =\n            parseFloat(parentStyles.paddingBottom) || 0;\n\n          const parentInnerWidth =\n            parentRect.width - parentPaddingLeft - parentPaddingRight;\n          const parentInnerHeight =\n            parentRect.height - parentPaddingTop - parentPaddingBottom;\n\n          // If the element takes up a significant portion of parent, use percentage\n          const widthPercent = (width / parentInnerWidth) * 100;\n          const heightPercent = (height / parentInnerHeight) * 100;\n\n          // Use percentage if it's a round number or close to common values\n          if (\n            Math.abs(widthPercent - Math.round(widthPercent)) < 0.1 ||\n            [25, 33.333, 50, 66.667, 75, 100].some(\n              (v) => Math.abs(widthPercent - v) < 0.5\n            )\n          ) {\n            widthValue = `${Math.round(widthPercent * 10) / 10}%`;\n          }\n\n          // For height, be more conservative with percentages (often px is preferred)\n          if (\n            Math.abs(heightPercent - Math.round(heightPercent)) < 0.1 &&\n            [25, 50, 75, 100].includes(Math.round(heightPercent))\n          ) {\n            heightValue = `${Math.round(heightPercent)}%`;\n          }\n        }\n\n        // Build styles object\n        const styles: Record<string, string> = {};\n\n        // Always set a fixed width and height to break out of responsive classes.\n        styles.width = widthValue;\n        styles.height = heightValue;\n\n        // If the element had a max-width constraint (e.g. from `max-w-full`),\n        // we update it to the new width to ensure the resize is not capped.\n        if (hasMaxWidth) {\n          styles.maxWidth = widthValue;\n        }\n\n        // Same for height.\n        if (hasMaxHeight) {\n          styles.maxHeight = heightValue;\n        }\n\n        // Send final dimensions as style change\n        const msg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"STYLE_BLUR\",\n          id: focusedElementId,\n          styles,\n          filePath: \"\",\n          line: 0,\n          column: 0,\n          className: element.getAttribute(\"class\") || \"\",\n        };\n\n        // Extract file info from data-orchids-id\n        const orchidsId = element.getAttribute(\"data-orchids-id\");\n        if (orchidsId) {\n          const parsed = parseOrchidsId(orchidsId);\n          if (parsed) {\n            msg.filePath = parsed.filePath;\n            msg.line = parsed.line;\n            msg.column = parsed.column;\n          }\n        }\n\n        window.parent.postMessage(msg, \"*\");\n      }\n\n      setIsResizing(false);\n      isResizingRef.current = false;\n      setResizeHandle(null);\n      setResizeStart(null);\n\n      // Re-enable pointer events\n      document.body.style.pointerEvents = \"\";\n\n      // Clear the last hit element to force re-detection after resize\n      lastHitElementRef.current = null;\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [isResizing, resizeStart, resizeHandle, focusedElementId, hoverBox]); // Added focusedElementId and hoverBox as dependencies\n\n  // Cleanup function to restore element state\n  const cleanupEditingElement = () => {\n    if (editingElementRef.current) {\n      const element = editingElementRef.current;\n\n      // Immediately clear the ref to prevent any further operations\n      editingElementRef.current = null;\n\n      // Flush pending style edits first for the same reason described above\n      handleStyleBlur(element);\n\n      // Now process text changes\n      handleTextChange(element);\n\n      // Restore child elements if they were protected\n      if (element.childElementCount > 0) {\n        restoreChildElements(element);\n      }\n\n      // Only set contentEditable to false if we made it true\n      if (!wasEditableRef.current) {\n        element.contentEditable = \"false\";\n      }\n\n      // Don't restore original styles - keep the applied styles\n      // Remove the outline suppression styles only\n      const currentStyle = element.getAttribute(\"style\") || \"\";\n      const cleanedStyle = currentStyle\n        .replace(/outline:\\s*none\\s*!important;?/gi, \"\")\n        .replace(/box-shadow:\\s*none\\s*!important;?/gi, \"\")\n        .trim()\n        .replace(/;\\s*;/g, \";\")\n        .replace(/^;|;$/g, \"\");\n\n      if (cleanedStyle) {\n        element.setAttribute(\"style\", cleanedStyle);\n      } else {\n        element.removeAttribute(\"style\");\n      }\n\n      element.blur();\n\n      // Remove event handlers\n      const handlers = (element as any)._editHandlers;\n      if (handlers) {\n        element.removeEventListener(\"focus\", handlers.focus);\n        element.removeEventListener(\"blur\", handlers.blur);\n        element.removeEventListener(\"input\", handlers.input);\n        delete (element as any)._editHandlers;\n      }\n\n      wasEditableRef.current = false;\n      // Clear the original content reference\n      originalContentRef.current = \"\";\n    }\n  };\n\n  // Prevent all navigation in visual edit mode\n  useEffect(() => {\n    if (!isVisualEditMode) return;\n\n    // Prevent link clicks\n    const preventLinkClick = (e: Event) => {\n      const target = e.target as HTMLElement;\n      const link = target.closest(\"a\");\n      if (link && !link.isContentEditable) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    };\n\n    // Prevent form submissions\n    const preventFormSubmit = (e: Event) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    // Add listeners in capture phase to catch events early\n    document.addEventListener(\"click\", preventLinkClick, true);\n    document.addEventListener(\"submit\", preventFormSubmit, true);\n\n    return () => {\n      document.removeEventListener(\"click\", preventLinkClick, true);\n      document.removeEventListener(\"submit\", preventFormSubmit, true);\n    };\n  }, [isVisualEditMode]);\n\n  // Clean up when exiting visual edit mode\n  useEffect(() => {\n    if (!isVisualEditMode) {\n      cleanupEditingElement();\n      // Clear applied styles tracking\n      appliedStylesRef.current.clear();\n      hasStyleChangesRef.current = false;\n\n      // Clear image element reference\n      focusedImageElementRef.current = null;\n    }\n  }, [isVisualEditMode]);\n\n  // Update focus box position when scrolling or resizing\n  useEffect(() => {\n    if (focusedElementRef.current) {\n      const handleUpdate = () => {\n        updateFocusBox();\n\n        if (focusedElementRef.current && focusedElementId) {\n          const fr = focusedElementRef.current.getBoundingClientRect();\n          const fBox = expandBox(fr);\n          if (fBox) {\n            const focMsg: ChildToParent = {\n              type: CHANNEL,\n              msg: \"FOCUS_MOVED\",\n              id: focusedElementId,\n              rect: {\n                top: fBox.top,\n                left: fBox.left,\n                width: fBox.width,\n                height: fBox.height,\n              },\n            };\n            postMessageDedup(focMsg);\n          }\n        }\n      };\n\n      window.addEventListener(\"scroll\", handleUpdate, true);\n      window.addEventListener(\"resize\", handleUpdate);\n\n      // Also observe the focused element for size changes\n      const resizeObserver = new ResizeObserver(handleUpdate);\n      resizeObserver.observe(focusedElementRef.current);\n\n      return () => {\n        window.removeEventListener(\"scroll\", handleUpdate, true);\n        window.removeEventListener(\"resize\", handleUpdate);\n        resizeObserver.disconnect();\n      };\n    }\n  }, [focusedElementId]);\n\n  useEffect(() => {\n    // Handle pointer movement directly in the iframe\n    function onPointerMove(e: PointerEvent) {\n      if (isResizingRef.current) {\n        return;\n      }\n      // Only track pointer when visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      // Don't show hover boxes while scrolling\n      if (isScrolling) return;\n\n      // Hit-testing at pointer position\n      const hit =\n        document\n          .elementFromPoint(e.clientX, e.clientY)\n          ?.closest<HTMLElement>(\"[data-orchids-id]\") ?? null;\n\n      if (hit !== lastHitElementRef.current) {\n        lastHitElementRef.current = hit;\n\n        if (!hit) {\n          setHoverBox(null);\n          setHoverBoxes([]);\n          setHoverTag(null);\n          lastHitIdRef.current = null;\n          // If we were previously focused on an image, ensure its src is flushed\n          flushImageSrcChange();\n\n          const msg: ChildToParent = {\n            type: CHANNEL,\n            msg: \"HIT\",\n            id: null,\n            tag: null,\n            rect: null,\n          };\n          postMessageDedup(msg);\n          return;\n        }\n\n        // Don't show hover box if this is the focused element\n        const hitId = hit.getAttribute(\"data-orchids-id\");\n\n        // Check if we're already showing boxes for this ID\n        if (hitId === lastHitIdRef.current) {\n          return;\n        }\n\n        lastHitIdRef.current = hitId;\n\n        const tagName =\n          hit.getAttribute(\"data-orchids-name\") || hit.tagName.toLowerCase();\n\n        // Update hover boxes immediately for instant feedback\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${hitId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        // Create hover boxes for all matching elements except the focused one\n        const boxes: Box[] = [];\n        allMatchingElements.forEach((element) => {\n          // Skip if this element is the focused one\n          const elementId = element.getAttribute(\"data-orchids-id\");\n          if (elementId === focusedElementId) {\n            return;\n          }\n\n          const rect = element.getBoundingClientRect();\n          boxes.push(expandBox(rect));\n        });\n\n        // Set multiple hover boxes\n        setHoverBoxes(boxes);\n\n        // Set single hover box for the primary element (for compatibility)\n        // Only set if it's not the focused element\n        if (hitId !== focusedElementId) {\n          const r = hit.getBoundingClientRect();\n          const expandedBox = expandBox(r);\n          setHoverBox(expandedBox);\n        } else {\n          setHoverBox(null);\n        }\n\n        setHoverTag(tagName);\n\n        const msg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"HIT\",\n          id: hitId,\n          tag: tagName,\n          rect:\n            hitId !== focusedElementId\n              ? expandBox(hit.getBoundingClientRect())\n              : null,\n        };\n        postMessageDedup(msg);\n      }\n    }\n\n    // Handle pointer leaving the document\n    function onPointerLeave() {\n      if (!isVisualEditModeRef.current) return;\n\n      if (isResizingRef.current) return;\n\n      setHoverBox(null);\n      setHoverBoxes([]);\n      setHoverTag(null);\n\n      // Flush image src change when cursor leaves iframe altogether\n      flushImageSrcChange();\n\n      lastHitElementRef.current = null;\n      lastHitIdRef.current = null;\n      const msg: ChildToParent = {\n        type: CHANNEL,\n        msg: \"HIT\",\n        id: null,\n        tag: null,\n        rect: null,\n      };\n      postMessageDedup(msg);\n    }\n\n    // Handle mousedown to prepare element for editing\n    function onMouseDownCapture(e: MouseEvent) {\n      if (isResizingRef.current) return;\n      // Only handle if visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      const hit = (e.target as HTMLElement)?.closest<HTMLElement>(\n        \"[data-orchids-id]\"\n      );\n\n      if (hit && isTextEditable(hit)) {\n        // Store whether it was already editable\n        wasEditableRef.current = hit.contentEditable === \"true\";\n\n        // Make element editable BEFORE the click goes through\n        if (!wasEditableRef.current) {\n          // Apply inline styles to remove focus ring\n          const currentStyle = hit.getAttribute(\"style\") || \"\";\n          hit.setAttribute(\n            \"style\",\n            `${currentStyle}; outline: none !important; box-shadow: none !important;`\n          );\n\n          hit.contentEditable = \"true\";\n\n          // If the element has children, protect them from being edited\n          if (hit.childElementCount > 0) {\n            protectChildElements(hit);\n          }\n        }\n      }\n    }\n\n    // Handle clicks to focus elements\n    function onClickCapture(e: MouseEvent) {\n      if (isResizingRef.current) return;\n      // Only handle if visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      // Debounce rapid clicks\n      const now = Date.now();\n      if (now - lastClickTimeRef.current < 100) {\n        return; // Ignore clicks within 100ms of each other\n      }\n      lastClickTimeRef.current = now;\n\n      const target = e.target as HTMLElement;\n      const hit = target.closest<HTMLElement>(\"[data-orchids-id]\");\n\n      if (hit) {\n        const tagName =\n          hit.getAttribute(\"data-orchids-name\") || hit.tagName.toLowerCase();\n\n        const hitId = hit.getAttribute(\"data-orchids-id\");\n        const isEditable = isTextEditable(hit);\n\n        // Always prevent default for non-text interactions\n        const isLink = hit.tagName.toLowerCase() === \"a\" || !!hit.closest(\"a\");\n        const isButton =\n          hit.tagName.toLowerCase() === \"button\" ||\n          hit.getAttribute(\"role\") === \"button\";\n\n        // Prevent navigation and button actions\n        if (isLink || isButton || !isEditable) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n        // Capture previously focused element before updating\n        const prevFocused = focusedElementRef.current;\n\n        // Update focused element\n        focusedElementRef.current = hit;\n        setFocusedElementId(hitId);\n        setFocusTag(tagName);\n\n        // Save focused element info to localStorage\n        if (hitId && typeof window !== \"undefined\") {\n          const focusedElementData = {\n            id: hitId,\n            tag: tagName,\n          };\n          localStorage.setItem(\n            FOCUSED_ELEMENT_KEY,\n            JSON.stringify(focusedElementData)\n          );\n        }\n\n        // Find ALL other elements with the same orchids ID and show hover boxes\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${hitId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        // Create hover boxes for all matching elements except the focused one\n        const boxes: Box[] = [];\n        allMatchingElements.forEach((element) => {\n          // Skip the focused element itself\n          if (element === hit) {\n            return;\n          }\n\n          const rect = element.getBoundingClientRect();\n          boxes.push(expandBox(rect));\n        });\n\n        // Set hover boxes for other matching elements\n        setHoverBoxes(boxes);\n        // Set the hover tag to show on other elements\n        if (boxes.length > 0) {\n          setHoverTag(tagName);\n        }\n\n        // Track image element specifically\n        if (hit.tagName.toLowerCase() === \"img\") {\n          focusedImageElementRef.current = hit as HTMLImageElement;\n        } else {\n          focusedImageElementRef.current = null;\n        }\n\n        // Store original styles for the focused element\n        originalStylesRef.current = getCurrentStyles(hit);\n\n        // If this is an editable element, set it up\n        if (isEditable) {\n          // Cancel any pending cleanup\n          if (pendingCleanupRef.current) {\n            clearTimeout(pendingCleanupRef.current);\n            pendingCleanupRef.current = null;\n          }\n\n          // Clean up any previous editing element first\n          if (editingElementRef.current && editingElementRef.current !== hit) {\n            // Force blur on the previous element to trigger handlers\n            editingElementRef.current.blur();\n            cleanupEditingElement();\n          }\n\n          // Only set up if this is a new element\n          if (hit !== editingElementRef.current) {\n            editingElementRef.current = hit;\n            // Store original content - for elements with children, only store direct text\n            if (hit.childElementCount > 0) {\n              originalContentRef.current = extractDirectTextContent(hit);\n            } else {\n              originalContentRef.current =\n                hit.innerText || hit.textContent || \"\";\n            }\n\n            // Create handlers with current element reference\n            const createHandlers = (element: HTMLElement) => {\n              const handleFocus = () => {\n                // Double-check this is still the editing element\n                if (element !== editingElementRef.current) return;\n\n                // If the user applied inline style edits **before** entering text\n                // editing mode, make sure we commit them right away so that the\n                // subsequent text edits operate on the updated source.\n                handleStyleBlur(element);\n\n                // Update original content - for elements with children, only store direct text\n                if (element.childElementCount > 0) {\n                  originalContentRef.current =\n                    extractDirectTextContent(element);\n                } else {\n                  originalContentRef.current =\n                    element.innerText || element.textContent || \"\";\n                }\n\n                // Style blur above resets the flag – keep it in sync.\n                hasStyleChangesRef.current = false;\n              };\n\n              const handleBlur = () => {\n                // Double-check this is still the editing element\n                if (element !== editingElementRef.current) return;\n\n                // Flush style changes *before* text changes so that the style\n                // update is committed with the original line/column offsets.\n                // A subsequent text update may shift the source code which would\n                // otherwise cause the later style edit to fail.\n                handleStyleBlur(element);\n                handleTextChange(element);\n              };\n\n              const handleInput = () => {\n                // Double-check this is still the editing element\n                if (element !== editingElementRef.current) return;\n                // Optionally handle real-time updates\n                // handleTextChange(element);\n              };\n\n              return { handleFocus, handleBlur, handleInput };\n            };\n\n            const handlers = createHandlers(hit);\n            hit.addEventListener(\"focus\", handlers.handleFocus);\n            hit.addEventListener(\"blur\", handlers.handleBlur);\n            hit.addEventListener(\"input\", handlers.handleInput);\n\n            // Store handlers for cleanup\n            (hit as any)._editHandlers = {\n              focus: handlers.handleFocus,\n              blur: handlers.handleBlur,\n              input: handlers.handleInput,\n            };\n          }\n        }\n\n        // Update focus box with expanded dimensions\n        const r = hit.getBoundingClientRect();\n        const expandedBox = expandBox(r);\n        setFocusBox(expandedBox);\n\n        // Clear hover box since we're focusing\n        setHoverBox(null);\n\n        // Get className for Tailwind extraction\n        const className = hit.getAttribute(\"class\") || \"\";\n\n        // Get src for images & track original\n        const srcRaw =\n          hit.tagName.toLowerCase() === \"img\"\n            ? (hit as HTMLImageElement).src\n            : undefined;\n\n        if (srcRaw) {\n          originalSrcRef.current = normalizeImageSrc(srcRaw);\n        }\n\n        // Get current styles immediately\n        const computedStyles = getCurrentStyles(hit);\n\n        // Send click event to parent with coordinates and current styles\n        const msg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"ELEMENT_CLICKED\",\n          id: hitId,\n          tag: tagName,\n          rect: expandedBox\n            ? {\n                top: expandedBox.top,\n                left: expandedBox.left,\n                width: expandedBox.width,\n                height: expandedBox.height,\n              }\n            : {\n                top: 0,\n                left: 0,\n                width: 0,\n                height: 0,\n              },\n          clickPosition: {\n            x: e.clientX,\n            y: e.clientY,\n          },\n          isEditable,\n          currentStyles: computedStyles,\n          className,\n          src: srcRaw,\n        };\n\n        // Send message with all data at once\n        postMessageDedup(msg);\n\n        // Move cleanup operations to after message is sent\n        setTimeout(() => {\n          // Before changing focus, flush pending image src change\n          flushImageSrcChange();\n\n          // Flush style changes for the previously focused element (if any)\n          if (prevFocused && prevFocused !== hit) {\n            handleStyleBlur(prevFocused);\n          }\n\n          // Clean up any previous editing element (if it's different)\n          if (editingElementRef.current && editingElementRef.current !== hit) {\n            cleanupEditingElement();\n          }\n        }, 0);\n      } else {\n        // Clicked on empty space or element without data-orchids-id\n        // Clear focus and hover boxes\n        if (focusedElementRef.current) {\n          // Flush any pending changes\n          flushImageSrcChange();\n          handleStyleBlur(focusedElementRef.current);\n          cleanupEditingElement();\n\n          // Clear all focus and hover states\n          focusedElementRef.current = null;\n          setFocusedElementId(null);\n          setFocusTag(null);\n          setFocusBox(null);\n          setHoverBox(null);\n          setHoverBoxes([]);\n          setHoverTag(null);\n\n          // Clear focused element from localStorage\n          if (typeof window !== \"undefined\") {\n            localStorage.removeItem(FOCUSED_ELEMENT_KEY);\n          }\n\n          // Notify parent that focus was cleared\n          const msg: ChildToParent = {\n            type: CHANNEL,\n            msg: \"ELEMENT_CLICKED\",\n            id: null,\n            tag: null,\n            rect: {\n              top: 0,\n              left: 0,\n              width: 0,\n              height: 0,\n            },\n            clickPosition: {\n              x: e.clientX,\n              y: e.clientY,\n            },\n            isEditable: false,\n            currentStyles: {},\n            className: \"\",\n          };\n          postMessageDedup(msg);\n        }\n      }\n    }\n\n    // Handle messages from parent\n    function onMsg(e: MessageEvent<ParentToChild>) {\n      if (e.data?.type !== CHANNEL) return;\n\n      // Handle preview font request from parent\n      if (e.data.msg === \"PREVIEW_FONT\" && \"elementId\" in e.data) {\n        const { elementId, fontFamily } = e.data;\n\n        // Skip if font already persisted for this element to avoid race condition\n        if (persistentFontMap.current.has(elementId)) {\n          return;\n        }\n\n        const element = document.querySelector(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as HTMLElement | null;\n        if (!element) return;\n\n        // Ensure font stylesheet is loaded\n        const familyKey = fontFamily.replace(/\\s+/g, \"+\");\n        if (!loadedFontFamilies.current.has(familyKey)) {\n          const link = document.createElement(\"link\");\n          link.rel = \"stylesheet\";\n          link.href = `https://fonts.googleapis.com/css2?family=${familyKey}:wght@400&display=swap`;\n          document.head.appendChild(link);\n          loadedFontFamilies.current.add(familyKey);\n        }\n\n        // Apply font family to element inline for preview\n        element.style.fontFamily = `'${fontFamily}', sans-serif`;\n        return;\n      }\n\n      // Handle scroll messages from parent\n      if (e.data.msg === \"SCROLL\" && \"dx\" in e.data && \"dy\" in e.data) {\n        window.scrollBy(e.data.dx, e.data.dy);\n      }\n\n      // Handle visual edit mode state changes\n      if (e.data.msg === \"VISUAL_EDIT_MODE\" && \"active\" in e.data) {\n        const newMode = e.data.active;\n        setIsVisualEditMode(newMode);\n\n        // Clear localStorage if visual edit mode is being turned off\n        if (!newMode && typeof window !== \"undefined\") {\n          localStorage.removeItem(VISUAL_EDIT_MODE_KEY);\n          localStorage.removeItem(FOCUSED_ELEMENT_KEY);\n        }\n\n        // Send acknowledgement back to parent so it knows we received the mode change\n        window.parent.postMessage(\n          { type: CHANNEL, msg: \"VISUAL_EDIT_MODE_ACK\", active: newMode },\n          \"*\"\n        );\n\n        if (!newMode) {\n          // already handled, flush too\n          // Flush image src change for current focus\n          flushImageSrcChange();\n\n          // Clean up any editing element\n          cleanupEditingElement();\n\n          // Clear image element reference\n          focusedImageElementRef.current = null;\n\n          // Clear everything when exiting visual edit mode\n          setHoverBox(null);\n          setHoverBoxes([]);\n          setFocusBox(null);\n          setFocusedElementId(null);\n          lastHitElementRef.current = null;\n          focusedElementRef.current = null;\n          hasStyleChangesRef.current = false;\n\n          setHoverTag(null);\n          setFocusTag(null);\n\n          // Notify parent that we've cleared the selection\n          const msg: ChildToParent = {\n            type: CHANNEL,\n            msg: \"HIT\",\n            id: null,\n            tag: null,\n            rect: null,\n          };\n          postMessageDedup(msg);\n        }\n      }\n\n      // Handle clear inline styles message\n      if (e.data.msg === \"CLEAR_INLINE_STYLES\" && \"elementId\" in e.data) {\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${e.data.elementId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        allMatchingElements.forEach((element) => {\n          // Clear only the inline styles we track (typography, spacing, and background)\n          const stylesToClear = [\n            \"fontSize\",\n            \"color\",\n            \"fontWeight\",\n            \"fontStyle\",\n            \"textDecoration\",\n            \"textAlign\",\n            \"paddingLeft\",\n            \"paddingRight\",\n            \"paddingTop\",\n            \"paddingBottom\",\n            \"marginLeft\",\n            \"marginRight\",\n            \"marginTop\",\n            \"marginBottom\",\n            \"backgroundColor\",\n            \"backgroundImage\",\n          ];\n\n          stylesToClear.forEach((prop) => {\n            (element.style as any)[prop] = \"\";\n          });\n        });\n\n        // Clear from our tracking\n        appliedStylesRef.current.delete(e.data.elementId);\n      }\n\n      // Handle show element hover message\n      if (e.data.msg === \"SHOW_ELEMENT_HOVER\" && \"elementId\" in e.data) {\n        const { elementId } = e.data;\n\n        if (!elementId) {\n          // Clear hover boxes if no element ID\n          setHoverBoxes([]);\n          setHoverTag(null);\n          return;\n        }\n\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        if (allMatchingElements.length > 0) {\n          const boxes: Box[] = [];\n          let tagName = \"\";\n\n          allMatchingElements.forEach((element) => {\n            // Skip if this element is the focused one\n            if (element === focusedElementRef.current) {\n              return;\n            }\n\n            const rect = element.getBoundingClientRect();\n            boxes.push(expandBox(rect));\n\n            if (!tagName) {\n              tagName =\n                element.getAttribute(\"data-orchids-name\") ||\n                element.tagName.toLowerCase();\n            }\n          });\n\n          // Set hover boxes for all matching elements\n          setHoverBoxes(boxes);\n          setHoverTag(boxes.length > 0 ? tagName : null);\n        }\n      }\n    }\n\n    // Handle scroll events to update hover box position\n    function onScroll() {\n      if (isResizingRef.current) return;\n      // Only update hover box if visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      // Hide hover boxes while scrolling\n      setIsScrolling(true);\n      setHoverBox(null);\n      setHoverBoxes([]);\n\n      // Notify parent that scrolling has started\n      const scrollMsg: ChildToParent = {\n        type: CHANNEL,\n        msg: \"SCROLL_STARTED\",\n      };\n      postMessageDedup(scrollMsg);\n\n      // Reset the notification flag after scrolling stops\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n      scrollTimeoutRef.current = window.setTimeout(() => {\n        setIsScrolling(false);\n        const scrollStopMsg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"SCROLL_STOPPED\",\n        };\n        postMessageDedup(scrollStopMsg);\n      }, 16); // One frame (16ms) for instant restoration\n    }\n\n    // Add event listeners\n    document.addEventListener(\"pointermove\", onPointerMove, { passive: true });\n    document.addEventListener(\"pointerleave\", onPointerLeave);\n    document.addEventListener(\"mousedown\", onMouseDownCapture, {\n      capture: true,\n    });\n    document.addEventListener(\"click\", onClickCapture, { capture: true });\n    window.addEventListener(\"message\", onMsg);\n    window.addEventListener(\"scroll\", onScroll, true);\n\n    return () => {\n      document.removeEventListener(\"pointermove\", onPointerMove);\n      document.removeEventListener(\"pointerleave\", onPointerLeave);\n      document.removeEventListener(\"mousedown\", onMouseDownCapture, true);\n      document.removeEventListener(\"click\", onClickCapture, true);\n      window.removeEventListener(\"message\", onMsg);\n      window.removeEventListener(\"scroll\", onScroll, true);\n      if (scrollTimeoutRef.current) clearTimeout(scrollTimeoutRef.current);\n    };\n  }, [focusedElementId, isResizing]); // Added focusedElementId and isResizing as dependencies\n\n  return (\n    <>\n      {/* Hover box - shows on hover with blue overlay */}\n      {isVisualEditMode && !isResizing && (\n        <>\n          {/* Render all hover boxes for elements with same ID */}\n          {hoverBoxes\n            .filter((box): box is NonNullable<Box> => box !== null)\n            .map((box, index) => (\n              <div key={index}>\n                <div\n                  className=\"fixed pointer-events-none border-[0.5px] border-[#38bdf8] bg-blue-200/20 border-dashed rounded-sm\"\n                  style={{\n                    zIndex: 100000,\n                    left: box.left,\n                    top: box.top,\n                    width: box.width,\n                    height: box.height,\n                  }}\n                />\n                {/* Tag label on each hover box */}\n                {hoverTag && (\n                  <div\n                    className=\"fixed pointer-events-none text-[10px] text-white bg-[#38bdf8] px-1 py-0.5 rounded-sm\"\n                    style={{\n                      zIndex: 100001,\n                      left: box.left,\n                      top: box.top - 20,\n                    }}\n                  >\n                    {hoverTag}\n                  </div>\n                )}\n              </div>\n            ))}\n        </>\n      )}\n\n      {/* Focus box - shows on click with just border, no overlay */}\n      {isVisualEditMode && focusBox && (\n        <>\n          {focusTag && (\n            <div\n              className=\"fixed text-[10px] font-semibold text-white bg-[#3b82f6] px-1 rounded-sm pointer-events-none select-none\"\n              style={{\n                zIndex: 100003,\n                left: focusBox.left - 4,\n                top: focusBox.top - 16,\n              }}\n            >\n              {focusTag}\n            </div>\n          )}\n\n          <div\n            className=\"fixed pointer-events-none border-[1.5px] border-[#38bdf8] rounded-sm\"\n            style={{\n              zIndex: 100001,\n              left: focusBox.left,\n              top: focusBox.top,\n              width: focusBox.width,\n              height: focusBox.height,\n            }}\n          />\n\n          {/* Resize handles */}\n          {!isResizing && (\n            <>\n              {/* Corner handles */}\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-nw-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left - 4,\n                  top: focusBox.top - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"nw\")}\n              />\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-ne-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width - 4,\n                  top: focusBox.top - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"ne\")}\n              />\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-sw-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left - 4,\n                  top: focusBox.top + focusBox.height - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"sw\")}\n              />\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-se-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width - 4,\n                  top: focusBox.top + focusBox.height - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"se\")}\n              />\n\n              {/* Edge handles */}\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-n-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width / 2 - 4,\n                  top: focusBox.top - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"n\")}\n              />\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-s-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width / 2 - 4,\n                  top: focusBox.top + focusBox.height - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"s\")}\n              />\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-w-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left - 4,\n                  top: focusBox.top + focusBox.height / 2 - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"w\")}\n              />\n              <div\n                className=\"fixed w-2 h-2 bg-[#38bdf8] rounded-full cursor-e-resize pointer-events-auto resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width - 4,\n                  top: focusBox.top + focusBox.height / 2 - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"e\")}\n              />\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1658, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/usman/OneDrive/Desktop/sre-incident-simulator-platform/orchids-sre-incident-simulator-platform-main/src/components/ErrorReporter.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\n\ntype ReporterProps = {\n  /*  ⎯⎯ props are only provided on the global-error page ⎯⎯ */\n  error?: Error & { digest?: string };\n  reset?: () => void;\n};\n\nexport default function ErrorReporter({ error, reset }: ReporterProps) {\n  /* ─ instrumentation shared by every route ─ */\n  const lastOverlayMsg = useRef(\"\");\n  const pollRef = useRef<NodeJS.Timeout>();\n\n  useEffect(() => {\n    const inIframe = window.parent !== window;\n    if (!inIframe) return;\n\n    const send = (payload: unknown) => window.parent.postMessage(payload, \"*\");\n\n    const onError = (e: ErrorEvent) =>\n      send({\n        type: \"ERROR_CAPTURED\",\n        error: {\n          message: e.message,\n          stack: e.error?.stack,\n          filename: e.filename,\n          lineno: e.lineno,\n          colno: e.colno,\n          source: \"window.onerror\",\n        },\n        timestamp: Date.now(),\n      });\n\n    const onReject = (e: PromiseRejectionEvent) =>\n      send({\n        type: \"ERROR_CAPTURED\",\n        error: {\n          message: e.reason?.message ?? String(e.reason),\n          stack: e.reason?.stack,\n          source: \"unhandledrejection\",\n        },\n        timestamp: Date.now(),\n      });\n\n    const pollOverlay = () => {\n      const overlay = document.querySelector(\"[data-nextjs-dialog-overlay]\");\n      const node =\n        overlay?.querySelector(\n          \"h1, h2, .error-message, [data-nextjs-dialog-body]\"\n        ) ?? null;\n      const txt = node?.textContent ?? node?.innerHTML ?? \"\";\n      if (txt && txt !== lastOverlayMsg.current) {\n        lastOverlayMsg.current = txt;\n        send({\n          type: \"ERROR_CAPTURED\",\n          error: { message: txt, source: \"nextjs-dev-overlay\" },\n          timestamp: Date.now(),\n        });\n      }\n    };\n\n    window.addEventListener(\"error\", onError);\n    window.addEventListener(\"unhandledrejection\", onReject);\n    pollRef.current = setInterval(pollOverlay, 1000);\n\n    return () => {\n      window.removeEventListener(\"error\", onError);\n      window.removeEventListener(\"unhandledrejection\", onReject);\n      pollRef.current && clearInterval(pollRef.current);\n    };\n  }, []);\n\n  /* ─ extra postMessage when on the global-error route ─ */\n  useEffect(() => {\n    if (!error) return;\n    window.parent.postMessage(\n      {\n        type: \"global-error-reset\",\n        error: {\n          message: error.message,\n          stack: error.stack,\n          digest: error.digest,\n          name: error.name,\n        },\n        timestamp: Date.now(),\n        userAgent: navigator.userAgent,\n      },\n      \"*\"\n    );\n  }, [error]);\n\n  /* ─ ordinary pages render nothing ─ */\n  if (!error) return null;\n\n  /* ─ global-error UI ─ */\n  return (\n    <html>\n      <body className=\"min-h-screen bg-background text-foreground flex items-center justify-center p-4\">\n        <div className=\"max-w-md w-full text-center space-y-6\">\n          <div className=\"space-y-2\">\n            <h1 className=\"text-2xl font-bold text-destructive\">\n              Something went wrong!\n            </h1>\n            <p className=\"text-muted-foreground\">\n              An unexpected error occurred. Please try again fixing with Orchids\n            </p>\n          </div>\n          <div className=\"space-y-2\">\n            {process.env.NODE_ENV === \"development\" && (\n              <details className=\"mt-4 text-left\">\n                <summary className=\"cursor-pointer text-sm text-muted-foreground hover:text-foreground\">\n                  Error details\n                </summary>\n                <pre className=\"mt-2 text-xs bg-muted p-2 rounded overflow-auto\">\n                  {error.message}\n                  {error.stack && (\n                    <div className=\"mt-2 text-muted-foreground\">\n                      {error.stack}\n                    </div>\n                  )}\n                  {error.digest && (\n                    <div className=\"mt-2 text-muted-foreground\">\n                      Digest: {error.digest}\n                    </div>\n                  )}\n                </pre>\n              </details>\n            )}\n          </div>\n        </div>\n      </body>\n    </html>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1843, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/usman/OneDrive/Desktop/sre-incident-simulator-platform/orchids-sre-incident-simulator-platform-main/src/components/theme-provider.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { ThemeProvider as NextThemesProvider } from 'next-themes';\n\nexport function ThemeProvider({\n  children,\n  ...props\n}: React.ComponentProps<typeof NextThemesProvider>) {\n  return <NextThemesProvider {...props}>{children}</NextThemesProvider>;\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAKO,SAAS,cAAc,EAC5B,QAAQ,EACR,GAAG,OAC6C;IAChD,qBAAO,yVAAC,2PAAA,CAAA,gBAAkB;QAAE,GAAG,KAAK;kBAAG;;;;;;AACzC","debugId":null}}]
}